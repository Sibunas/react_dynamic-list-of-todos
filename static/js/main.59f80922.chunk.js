(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],{15:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var a=c(6),s=c.n(a),n=c(5),l=c(2),r=c(3),o=c.n(r),i=c(1),d=(c(12),c(13),c(0)),j=function(e){var t=e.todos,c=e.onSelectTodo,a=e.selectedTodoId,s=e.setSelectedTodoId;return Object(d.jsx)("div",{children:Object(d.jsxs)("table",{className:"table is-narrow is-fullwidth",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:"fas fa-check"})})}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:" "})]})}),Object(d.jsx)("tbody",{children:t.map((function(e,t){return Object(d.jsxs)("tr",{"data-cy":"todo",children:[Object(d.jsx)("td",{className:"is-vcentered",children:t+1}),Object(d.jsx)("td",{className:"is-vcentered",children:e.completed&&Object(d.jsx)("span",{className:"icon","data-cy":"iconCompleted",children:Object(d.jsx)("i",{className:"fas fa-check"})})}),Object(d.jsx)("td",{className:"is-vcentered is-expanded",children:Object(d.jsx)("p",{className:e.completed?"has-text-success":"has-text-danger",children:e.title})}),Object(d.jsx)("td",{className:"has-text-right is-vcentered",children:a===e.id?Object(d.jsx)("button",{"data-cy":"hideButton",className:"button",type:"button",onClick:function(){return s(null)},children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:"far fa-eye-slash"})})}):Object(d.jsx)("button",{"data-cy":"selectButton",className:"button",type:"button",onClick:function(){c(e),s(e.id)},children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:"far fa-eye"})})})})]},e.id)}))})]})})},u=function(e){var t=e.onFilterChange,c=Object(i.useState)("all"),a=Object(l.a)(c,2),s=a[0],n=a[1],r=Object(i.useState)(""),o=Object(l.a)(r,2),j=o[0],u=o[1],b=function(){u(""),t(s,"")};return Object(d.jsxs)("form",{className:"field has-addons",children:[Object(d.jsx)("p",{className:"control",children:Object(d.jsx)("span",{className:"select",children:Object(d.jsxs)("select",{"data-cy":"statusSelect",value:s,onChange:function(e){var c=e.target.value;n(c),t(c,j)},children:[Object(d.jsx)("option",{value:"all",children:"All"}),Object(d.jsx)("option",{value:"active",children:"Active"}),Object(d.jsx)("option",{value:"completed",children:"Completed"})]})})}),Object(d.jsxs)("p",{className:"control is-expanded has-icons-left has-icons-right",children:[Object(d.jsx)("input",{"data-cy":"searchInput",type:"text",className:"input",placeholder:"Search...",value:j,onChange:function(e){u(e.target.value),t(s,e.target.value)}}),Object(d.jsx)("span",{className:"icon is-left",children:Object(d.jsx)("i",{className:"fas fa-magnifying-glass"})}),j&&Object(d.jsx)("span",{className:"icon is-right",style:{pointerEvents:"all"},onClick:b,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||b()},role:"button",tabIndex:0,"aria-label":"Clear Query",children:Object(d.jsx)("button",{"data-cy":"clearSearchButton",type:"button",className:"delete","aria-label":"Clear Search"})})]})]})},b=(c(15),function(){return Object(d.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(d.jsx)("div",{className:"Loader__content"})})}),h=function(e){var t=e.todo,c=e.user,a=e.isLoading,s=e.onClose;if(!t)return null;var n=null===c||void 0===c?void 0:c.name;return Object(d.jsxs)("div",{className:"modal is-active","data-cy":"modal",children:[Object(d.jsx)("div",{className:"modal-background","aria-label":"Close modal"}),a?Object(d.jsx)(b,{"data-cy":"loader"}):Object(d.jsxs)("div",{className:"modal-card",children:[Object(d.jsxs)("header",{className:"modal-card-head",children:[Object(d.jsxs)("div",{className:"modal-card-title has-text-weight-medium","data-cy":"modal-header",children:["`Todo # $",t.id,"`"]}),Object(d.jsx)("button",{type:"button",className:"delete","data-cy":"modal-close",onClick:s,"aria-label":"Close"})]}),Object(d.jsxs)("div",{className:"modal-card-body",children:[Object(d.jsx)("p",{className:"block","data-cy":"modal-title",children:t.title}),Object(d.jsxs)("p",{className:"block","data-cy":"modal-user",children:[t.completed?Object(d.jsx)("strong",{className:"has-text-success",children:"Done"}):Object(d.jsx)("strong",{className:"has-text-danger",children:"Planned"})," by ",c?Object(d.jsx)("a",{href:"mailto:".concat(c.email),children:n}):"Loading user..."]})]})]})]})};function O(e){var t,c="https://mate-academy.github.io/react_dynamic-list-of-todos/api"+e+".json";return(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch(c)})).then((function(e){return e.json()}))}var m=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1],s=Object(i.useState)([]),r=Object(l.a)(s,2),m=r[0],x=r[1],f=Object(i.useState)(!1),p=Object(l.a)(f,2),v=p[0],N=p[1],y=Object(i.useState)(null),g=Object(l.a)(y,2),k=g[0],S=g[1],C=Object(i.useState)(null),w=Object(l.a)(C,2),T=w[0],I=w[1],L=Object(i.useState)(!1),E=Object(l.a)(L,2),_=E[0],B=E[1],F=Object(i.useState)("all"),A=Object(l.a)(F,2),D=A[0],J=A[1],P=Object(i.useState)(""),K=Object(l.a)(P,2),Q=K[0],$=K[1],q=Object(i.useState)(!1),z=Object(l.a)(q,2),G=z[0],H=z[1],M=Object(i.useState)(null),R=Object(l.a)(M,2),U=R[0],V=R[1],W=function(){var e=Object(n.a)(o.a.mark((function e(t){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,fetch("https://mate-academy.github.io/react_dynamic-list-of-todos/api/users/".concat(t,".json"));case 3:if((c=e.sent).ok){e.next=7;break}throw H(!1),new Error("Failed to fetch user details");case 7:return e.next=9,c.json();case 9:return a=e.sent,H(!1),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){N(!0),O("/todos").then((function(e){a(e),x(e)})).finally((function(){N(!1)}))}),[]),Object(i.useEffect)((function(){var e=c.filter((function(e){return("all"===D||("completed"===D?e.completed:!e.completed))&&e.title.toLowerCase().includes(Q.toLowerCase())}));x(e)}),[c,D,Q]);var X=function(){var e=Object(n.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(t),B(!0),V(t.id),e.prev=3,e.next=6,W(t.userId);case 6:c=e.sent,I(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error fetching user details:",e.t0);case 13:return e.prev=13,N(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"section",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"box",children:[Object(d.jsx)("h1",{className:"title",children:"Todos:"}),Object(d.jsx)("div",{className:"block",children:Object(d.jsx)(u,{onFilterChange:function(e,t){J(e),$(t)}})}),v||G?Object(d.jsx)(b,{"data-cy":"loader"}):Object(d.jsxs)("div",{className:"block",children:[Object(d.jsx)(j,{todos:m,onSelectTodo:X,selectedTodoId:U,setSelectedTodoId:V}),k&&Object(d.jsx)(h,{todo:k,user:T,isLoading:v,onClose:function(){return S(null)}})]})]})})}),_&&Object(d.jsx)(h,{todo:k,user:T,onClose:function(){B(!1),S(null)},isLoading:!1})]})};s.a.render(Object(d.jsx)(m,{}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.59f80922.chunk.js.map